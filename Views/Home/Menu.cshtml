@model IEnumerable<ZeonEcommerce.Models.Categories>
<div class="menu">
    @{var i = 0; }
    <div class="repsonsive-menu"><i class="icon-406" title="406"></i> Menu</div>
    <ul>
        @foreach (var item in Model)
        {
            if (item.SubCategoryID == 0)
            {
                if (Request.Params["category"] == item.Name)
                {
                    <li class="active">
                        <a href="@Url.Action("Products", "Home", new { category = item.Name })">@item.Name</a>

                        <ul>
                            @foreach (var Subitem in Model)
                            {
                                if (Subitem.SubCategoryID == item.CategoriesId)
                                {
                                    <li>
                                        <a href="@Url.Action("Products", "Home", new { category = Subitem.Name })">@Subitem.Name</a>

                                        <ul class="submenu">
                                            @foreach (var Subitem2 in Model)
                                            {
                                                i++;
                                                if (Subitem2.SubCategoryID == Subitem.CategoriesId)
                                                {
                                                    <li><a href="@Url.Action("Products", "Home", new { category = Subitem2.Name })">@Subitem2.Name</a></li>
                                                }
                                                if (i == 8)
                                                {
                                                    break;
                                                }
                                            }
                                        </ul>

                                    </li>


                                }
                            }
                        </ul>
                    </li>
                    continue;
                }
                <li>
                    <a href="@Url.Action("Products", "Home", new { category = item.Name })">@item.Name</a>
                    <ul>
                        @foreach (var Subitem in Model)
                        {
                            if (Subitem.SubCategoryID == item.CategoriesId)
                            {
                                <li>
                                    <a href="@Url.Action("Products", "Home", new { category = Subitem.Name })">@Subitem.Name</a>

                                    <ul class="submenu">
                                        @foreach (var Subitem2 in Model)
                                        {
                                            i++;
                                            if (Subitem2.SubCategoryID == Subitem.CategoriesId)
                                            {
                                                <li><a href="@Url.Action("Products", "Home", new { category = Subitem2.Name })">@Subitem2.Name</a></li>
                                            }
                                            if (i == 8)
                                            {
                                                break;
                                            }
                                        }
                                    </ul>

                                </li>


                            }
                        }
                    </ul>
                </li>
            }

        }
        }

    </ul>
    <div class="clear"></div>
</div>
