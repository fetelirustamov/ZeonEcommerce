@model IEnumerable<ZeonEcommerce.Models.Products>
<div class="box">
    <div class="container" style="background-color:#fff;border:1px solid #E5E5E5;box-shadow:2px; border-radius:4px;box-shadow: inset 0 -1px 0 #ccc;">
        <div class="tesla-carousel" data-tesla-plugin="carousel" data-tesla-container=".tesla-carousel-items" data-tesla-item=">div" data-tesla-autoplay="false" data-tesla-rotate="false">
            <div class="site-title" style="margin-top:10px">
                <ul class="wrapper-arrows">
                    <li><i class="icon-517 prev" title="left arrow"></i></li>
                    <li><i class="icon-501 next" title="right arrow"></i></li>
                </ul>
                <div style="margin:10px;">
                    <span style="font-size:16px;color:#333333">Yeni Məhsullar</span>
                </div>
            </div>
            <div class="row">
                <div class="tesla-carousel-items">
                    @foreach (var item in Model.OrderByDescending(x => x.ProductsId).Take(10))
                    {
                        <div class="col-md-2 col-xs-4">
                            <div class="product">
                                <div class="product-cover">
                                    <img src="~/@item.Picture?w=190&h=190" alt="product name" />
                                </div>

                                <div class="p-details">
                                    <h4>
                                        <a href="@Url.Action("ProductDetails", "Home", new { id = item.ProductsId })">
                                            @{ string name = "";
                                                if (item.Name.Length > 40)
                                                {
                                                    name = item.Name.Substring(0, 40) + "...";

                                                }
                                                else
                                                {
                                                    name = item.Name;
                                                }
                                            } <span>@name</span>
                                        </a>
                                    </h4>
                                    @if (item.Discont != 0)
                                    {
                                        <div class="product-discont"><div class="discont">%@item.Discont</div></div>
                                        <div class="product-price" style="width:60%;">
                                            <a href="javascript:void(0)" data-id="@item.ProductsId" class="AddToCart"><i class="icon-257" title="Səbətə at"></i></a>
                                            <p style="font-size:14px;">
                                                <span style=" text-decoration-line: line-through; ">@item.Price.ToString("C2")</span><br />
                                                @{var price = (decimal)(item.Price - (item.Price * item.Discont) / 100);}@price.ToString("C2")
                                            </p>
                                        </div>
                                    }
                                    else
                                    {
                                        <div style="width:92%;padding-top:4px;" class="product-price">
                                            <a href="javascript:void(0)" data-id="@item.ProductsId" class="AddToCart">
                                                <i class="icon-257 " style="margin-bottom: -1px;" title="Səbətə at"></i>
                                            </a>
                                            <p>@item.Price.ToString("C2")</p>
                                        </div>
                                    }

                                </div>
                            </div>
                        </div>
                    }

                </div>
            </div>
        </div>
    </div>
</div>
<script src="~/Public/Zeon/js/jquery-2.2.0.min.js"></script>
<script>
    $(document).ready(function myfunction() {
        $(".AddToCart").click(function myfunction() {
            var pId = $(this).attr("data-id");
            $.ajax({
                type: "GET",
                url: "/Home/AddCart",
                data: { id: pId },
                success: function myfunction() {
                    $.ajax({
                        type: "GET",
                        url: "/Home/MiniCartWidget",
                        success: function myfunction(data) {
                            $(".cart-all").html("");
                            $(".cart-all").html(data);
                        }
                    })
                },
                error: function myfunction() {
                    alert("Error sfgsgs")
                }
            });
        });
    });
</script>